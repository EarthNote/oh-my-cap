[{
  "name": "流程介绍",
  "description": "gCAP 反演震源机制需要三个步骤： 计算格林函数 数据预处理 震源机制反演  ",
  "body": "gCAP 反演震源机制需要三个步骤： 计算格林函数 数据预处理 震源机制反演  计算格林函数 格林函数表示 t_0 时刻作用在 r_0 处的单位力矢量在 t 时刻 r 处产生的位移矢量。地震的波形记录是震源项、格林函数以及仪器响应三者的卷积。波形反演震源机制解的思路是将假定的震源项（震源机制以及震源时间函数）与计算出来的格林函数进行卷积，并将卷积得到的结果与去仪器响应之后的观测波形进行对比。因而正确计算格林函数是关键的一步。数据预处理 数据预处理是对观测到的地震波形数据进行一些处理以符合 gCAP 对数据的要求。gCAP 要求地震波形数据必须满足如下要求： 必须是SAC格式 三分量波形数据文件名格式为 station.[rtz] 且必须放在一个事件目录内 必须去除仪器响应得到位移或速度记录，单位为 cm 或 cm/s SAC头段中 o、az、dist 必须定义  反演 gCAP 会截取波形中的 Pnl 波和面波的波形，并通过遍历所有可能的震源参数以得到与实际波形最像的理论地震图。",
  "url": "http://oh-my-cap.wangliang.one/procedures/intro-to-procedures/"
},{
  "name": "新手入门",
  "description": "本文简要介绍本项目。CAP 简介 CAP 方法，即 Cut And Paste 方法，是一种将连续地震波形切割成多个波形片段来反演震源机制解的方法。该方法主要由 朱露培教授 发展和实现。如果你需要反演的地震在矩震级 3 级以上，7 级以下（大致范围，并不绝对），在 500 公里内至少有 3 个宽频带波形数据（有仪器响应文件），原则上来说，CAP 方法可以满足你。朱老师发布的 CAP 程序有三个不同的版本：CAP、gCAP 和 gCAP3D。 CAP 是朱露培教授早期实现的代码，可用于反演双力偶解。该版本仅通过私下交流传播，代码并未在网络上开源； gCAP 在 CAP 的基础上增加了反演完整矩张量解的功能。gCAP 于 2013 年在网络上开源。 gCAP3D 在 gCAP 的基础上增加了使用三维模型下的格林函数进行反演的功能。gCAP3D 于 2016 年在网络上开源。  另外，很多学者发布了自己的 CAP 版本，各有特色。为什么选择 Oh My CAP Oh My CAP 项目基于 gCAP 建立，对 gCAP 的核心代码只做了微量修改。简单地说，如果你选择 Oh My CAP，你用的就是 gCAP。而在易用性上，本项目远超官方原版本。下面不完全罗列本项目的优势： 理清了程序的依赖关系，最大限度地提供自动安装脚本和安装程序源文件和手把手的安装指南； 手把手的示例演示，和每一个步骤的讲解； 提供调用 gCAP 的现成 Perl 脚本； 可以清楚查看对原 gCAP 代码做了哪些具体修改（这些修改的记录并非靠人力记录，而是依托 Github 的版本对照功能自动实现），  学习指南 首先，你需要安装上程序，所以你应该首先按照网页上『安装』页面的内容进行安装。然后，你需要检查你的安装是否成功，这时，你应该照着『快速开始』里的例子，看能不能自己把例子做出来。然后，你应该仔细学习『流程』的内容，详细掌握每一个步骤。 『代码差异』页面展示的是本项目相对于官方原版程序，做了哪些修改。",
  "body": " 本文简要介绍本项目。CAP 简介 CAP 方法，即 Cut And Paste 方法，是一种将连续地震波形切割成多个波形片段来反演震源机制解的方法。该方法主要由 朱露培教授 发展和实现。如果你需要反演的地震在矩震级 3 级以上，7 级以下（大致范围，并不绝对），在 500 公里内至少有 3 个宽频带波形数据（有仪器响应文件），原则上来说，CAP 方法可以满足你。朱老师发布的 CAP 程序有三个不同的版本：CAP、gCAP 和 gCAP3D。 CAP 是朱露培教授早期实现的代码，可用于反演双力偶解。该版本仅通过私下交流传播，代码并未在网络上开源； gCAP 在 CAP 的基础上增加了反演完整矩张量解的功能。gCAP 于 2013 年在网络上开源。 gCAP3D 在 gCAP 的基础上增加了使用三维模型下的格林函数进行反演的功能。gCAP3D 于 2016 年在网络上开源。  另外，很多学者发布了自己的 CAP 版本，各有特色。为什么选择 Oh My CAP Oh My CAP 项目基于 gCAP 建立，对 gCAP 的核心代码只做了微量修改。简单地说，如果你选择 Oh My CAP，你用的就是 gCAP。而在易用性上，本项目远超官方原版本。下面不完全罗列本项目的优势： 理清了程序的依赖关系，最大限度地提供自动安装脚本和安装程序源文件和手把手的安装指南； 手把手的示例演示，和每一个步骤的讲解； 提供调用 gCAP 的现成 Perl 脚本； 可以清楚查看对原 gCAP 代码做了哪些具体修改（这些修改的记录并非靠人力记录，而是依托 Github 的版本对照功能自动实现），  学习指南 首先，你需要安装上程序，所以你应该首先按照网页上『安装』页面的内容进行安装。然后，你需要检查你的安装是否成功，这时，你应该照着『快速开始』里的例子，看能不能自己把例子做出来。然后，你应该仔细学习『流程』的内容，详细掌握每一个步骤。 『代码差异』页面展示的是本项目相对于官方原版程序，做了哪些修改。版权协议和引用问题 本项目中所使用的 fk、pssac 以及 gcap 的源码修改自朱老师的原始代码。这部分代码遵循 GPL 协议，即任何人均可免费获取、使用、修改和再发布代码，但是修改后的版本也必须公开并按 GPL 协议授权。本项目中的其余源码以及网页内容采用更加宽松的 Apache 协议，即在尊重本项目署名权的前提下，可以选择不公开自己的修改。如果你发表了正式文章，需要有以下引用 Zhu, L., and D. V. Helmberger, 1996, Advancements in source estimation techniques using broadband regional seismograms. BSSA, 86, 1634-1641. (78) Zhu L, Ben-Zion Y. Parametrization of general seismic potency and moment tensors for source inversion of seismic waveform data[J]. Geophysical Journal International, 2013, 194(2): 839-843.  第 1 篇文章是 CAP 方法成型文章（并不是 CAP 的第一篇，但是是方法成型的第一篇），第二篇文章是 CAP 方法从只反演双力偶解发展为完整矩张量解的文章。联系方式 王亮 成都理工大学Email： wangliang.one@foxmail.comCAP 讨论 QQ 群：580712662欢迎任何人加入到该项目的更新与维护中！",
  "url": "http://oh-my-cap.wangliang.one/about/"
},{
  "name": "计算格林函数",
  "description": "使用 gCAP 反演震源机制的第一步是正确计算格林函数。默认情况下，本项目中 gCAP 将 Glib 作为格林函数库所在目录。",
  "body": "使用 gCAP 反演震源机制的第一步是正确计算格林函数。默认情况下，本项目中 gCAP 将 Glib 作为格林函数库所在目录。文件说明 Glib 目录下包含了一个格林函数的示例： run_fk.pl、 run_parallel.pl、 config.pm 和 model.fk。run_fk.pl 和 run_parallel.pl是计算格林函数的脚本，区别在于后者是进行的并行计算，这两个脚本都需要模块文件 config.pm。 在实际使用时，这三个文件不需要修改。至少，我的设计是不需要修改。model.fk 是示例计算格林函数所用的配置文件，里面包含了示例的一维地层等信息。格林函数配置文件 model.fk 的内容如下：# FK configuration DIST: 135/145/5 210 235 260 280 300 415 DEPTH: 5 10/20/5 25 NT: 512 DT: 0.2 FLAT: NO # NO or YES. if undefined, scripts will use YES 5.5 3.18 5.50 2.53 600 1200 10.5 3.64 6.30 2.79 600 1200 16.0 3.87 6.70 2.91 600 1200 90.0 4.50 7.80 3.27 900 1800  说明如下： # 号后的内容对程序没有作用，只是注释；空行也没有作用 DIST 意义是指明哪些震中距的格林函数，其中 135/145/5 等于计算 135、140 和 145 三个震中距 DEPTH 是设置深度 NT 是设置数据点数 DT 是设置采样周期 FLAT 是设置是否需要展平变换 以 NT: 512 这一行来说，其中的冒号是必须的，而且一定要是英文冒号，冒号后的空格可以不要。 程序支持的参数是 DIST、DEPTH、NT、DT 和 FLAT，没有其他的。 最下面几行是一维地层模型，这部分的格式为：地层厚度 S波速度 P波速度 密度 S波Q值 P波Q值，后三项可以省略。  如何正确设置计算的参数，请参考 fk用法笔记。计算示例格林函数 运行脚本 run_fk.pl 即可计算得到示例所需的格林函数。$ perl run_fk.pl model.fk  如果安装了 Perl 的并行模块 Parallel::ForkManager，你可以使用脚本 run_parallel.pl，用并行的方式完成上述计算：$perl run_parallel.pl model.fk  格林函数库 计算完成后会得到 5 个名为 model_xx（xx 代表震源深度）的文件夹，其中包含了震源深度取不同值所对应的格林函数。以 model_05 目录为例，其中包含了众多文件名为 xxx.grn.x 的格林函数文件。其中： xxx 代表震中距 x 取0-8，对应双力偶震源的9个格林函数分量 x 取a、b、c，对应爆炸源的3个格林函数分量  所有格林函数均是 SAC 格式，其中 xxx.grn.0 和 xxx.grn.5 的SAC 头段 t1 和 t2 中分别保存了初至 P 波和 初至 S 波的到时，SAC 头段 user1 和 user2 中保存了初至 P 波和初至 S 波的离源角（相对于垂直向下方向旋转的角度)。gCAP 可以根据 SAC 头段 t1 和 t2 的值自动确定要截取的波形时间窗；若反演中需要使用震相初动极性信息，则需要从 SAC 头段 user1 和 user2 中读取震相离源角。",
  "url": "http://oh-my-cap.wangliang.one/procedures/gflib/"
},{
  "name": "安装",
  "description": "初学者需要阅读本安装文档的每一个字！因为版权原因，我无法在此提供全部安装包，有困难请加群 580712662。 gCAP 依赖 SAC、GMT、fk 和 pssac，没有这四个，程序用不上来。另外，绝大多数情况，原始地震数据是 seed 格式，所以往往需要 rdseed。平台问题 gCAP 可以运行在 GNU/Linux 和 MacOS 上。因为 gCAP 依赖的 SAC 几乎不可能在 Windows 上安装，所以请勿尝试 Windows！ 98% 的可能性你会在 GNU/Linux 上用 gCAP。GNU/Linux 有众多的桌面发行版，这些桌面发行版主要可以分为两组即以红帽为基础的 REHL 系和以 Debian 为基础的 Debian 系。红帽、CentOS、Fedora 等属于 REHL 系，Debian、Ubuntu、Mint 属于 Debain 系。 以下安装步骤在 CentOS 和 Mint 上验证通过。在其他 Linux 发行版及 Mac 上安装步骤类似。安装编译工具 请勿尝试安装 g77！gfortran 已经全面代替 g77 了。 REHL 系（红帽、CentOS、Fedora 等）用户请参照 CentOS 的安装方式。 Debain 系（Debian、Ubuntu、Mint 等）用户请参照 Mint 的安装方式。CentOS sudo yum install gcc gcc-c++ gcc-gfortran sudo yum install compat-gcc-44 compat-gcc-44-c++ compat-gcc-44-gfortran compat-libf2c-34 sudo yum install make  Mint sudo apt-get install gcc gfortran  MacOS MacOS 用户推荐使用 Homebrew 安装。",
  "body": " 初学者需要阅读本安装文档的每一个字！因为版权原因，我无法在此提供全部安装包，有困难请加群 580712662。 gCAP 依赖 SAC、GMT、fk 和 pssac，没有这四个，程序用不上来。另外，绝大多数情况，原始地震数据是 seed 格式，所以往往需要 rdseed。平台问题 gCAP 可以运行在 GNU/Linux 和 MacOS 上。因为 gCAP 依赖的 SAC 几乎不可能在 Windows 上安装，所以请勿尝试 Windows！ 98% 的可能性你会在 GNU/Linux 上用 gCAP。GNU/Linux 有众多的桌面发行版，这些桌面发行版主要可以分为两组即以红帽为基础的 REHL 系和以 Debian 为基础的 Debian 系。红帽、CentOS、Fedora 等属于 REHL 系，Debian、Ubuntu、Mint 属于 Debain 系。 以下安装步骤在 CentOS 和 Mint 上验证通过。在其他 Linux 发行版及 Mac 上安装步骤类似。安装编译工具 请勿尝试安装 g77！gfortran 已经全面代替 g77 了。 REHL 系（红帽、CentOS、Fedora 等）用户请参照 CentOS 的安装方式。 Debain 系（Debian、Ubuntu、Mint 等）用户请参照 Mint 的安装方式。CentOS sudo yum install gcc gcc-c++ gcc-gfortran sudo yum install compat-gcc-44 compat-gcc-44-c++ compat-gcc-44-gfortran compat-libf2c-34 sudo yum install make  Mint sudo apt-get install gcc gfortran  MacOS MacOS 用户推荐使用 Homebrew 安装。brew install gcc make  rdseed rdseed 用于转换地震数据，是非常常用的软件。如果你不安装 rdseed，你也可以使用本项目，但无法运行成功本项目提供的例子。安装请参见 rdseed 的安装。虽然需要申请，IRIS 才提供 rdseed，但是只要提交申请，不经审核，即时提供下载。SAC 建议使用 SAC 的 v101.6a 版。SAC 是非开源软件，但对学术界用户开放源代码和免费使用。根据授权协议，我不能直接向你提供，你需要自己向 IRIS 证明你的学术身份来申请源码包或者二进制包。申请地址是 http://ds.iris.edu/ds/nodes/dmc/forms/sac/ 。你要注意，这个审核是人工审核，和前面的 rdseed 可不一样，别和 IRIS 耍花招。SAC 的安装参考： SAC 在 Linux 上的安装 SAC 在 Mac 上的安装  已知在 Ubuntu 上如果用二进制包安装，会导致之后的 fk 等编译失败，故强烈建议用源码编译的方式。GMT gCAP 依赖 GMT4。GMT4 的安装请参考： GMT 4 在 Linux 上的安装 GMT 4 在 Mac 上的安装  GMT5 用户可以参考 GMT4 与 GMT5 双版本共存 一文，以保证系统中存在 GMT4 和 GMT5 两个版本且互不影响。TauP 本项目中使用 TauP 计算理论到时。TauP 的安装请参考 TauP 的安装。下载 Oh My CAP  zip 格式压缩包 tar.gz 格式压缩包  fk gcap 需要使用 fk 计算格林函数。本项目中包含了 fk 源码，进入 /path/to/oh-my-cap/src/fk 目录，输入命令进行编译:$ make  若系统中已自行安装 fk，可忽略这一步。pssac gcap 需要使用 pssac 绘制地震波形。本项目中包含了 pssac 源码，进入 /path/to/oh-my-cap/src/pssac 目录，输入命令进行编译:$ make  若系统中已自行安装 pssac，可忽略这一步。gCAP 在成功执行完以上步骤后，才可以着手编译 gCAP。gCAP 使用了商业软件 Numerical Recipes（简称 NR）中的一些子函数， 包括 matrix 、 free_matrix 、 free_convert_matrix 、 jacobi 和 eigsrt 。 由于版权原因，我不能把这几个子函数的源码直接放到这里。 用户应自行购买缺失的源码，并将其放到 /path/to/oh-my-cap/src/gcap 下， 再在该目录下进行编译:$ make  添加环境变量 需要为 fk、pssac 和 gcap 添加环境变量。将以下内容加入配置文件 ~/.bashrc 中:# 注意将 /path/to/oh-my-cap 修改为 oh-my-cap 实际的绝对路径! # 若自行安装了 fk 或 pssac，请注释掉相关环境变量配置行 export OH_MY_CAP=/path/to/oh-my-cap export PATH=$OH_MY_CAP/src/fk:${PATH} export PATH=$OH_MY_CAP/src/pssac:${PATH} export PATH=$OH_MY_CAP/src/gcap:${PATH}  通常系统的默认 shell 都是 Bash，如果有你自行更换默认 Shell 的情况（如Csh），那么设置的方式可能不同，请自行解决！安装 Perl 的并行模块 计算格林函数比较耗时，Oh My CAP 已经实现用并行计算格林函数：cpanm Parallel::ForkManager  cpanm 是需要事先安装的，安装方法见Perl 多版本共存之 plenv",
  "url": "http://oh-my-cap.wangliang.one/install/"
},{
  "name": "数据预处理",
  "description": "文件说明 example 内的 Perl 脚本就是数据预处理和后面的反演的脚本。20080418093658 是一个示例事件，里面存储这个事件的相关文件：",
  "body": "文件说明 example 内的 Perl 脚本就是数据预处理和后面的反演的脚本。20080418093658 是一个示例事件，里面存储这个事件的相关文件： 20080418093658.seed: SEED 格式的事件波形数据，包含了三分量波形数据以及仪器响应。 event.info: 事件信息文件，其中包含了地震事件的基本信息，依次为发震时刻、震中纬度、震中经度、震源深度和震级。示例事件的 event.info 的内容如下:2008-04-18T09:36:58 38.4584 -87.8398 15.8 5.4  event.conf: 数据处理和反演所用的配置文件。在 example  另外，example 内还有一个 event.conf 文件。脚本运行后，会首先读取和脚本在同一路径的配置文件，然后再读取事件路径下的配置文件。后者中的内容会覆盖前者，后者没有的设置会保留前者的内容。这样的设计主要是为了兼顾统一设置处理参数和为每个事件有针对性的设置处理参数。预处理流程 process.pl 实际上是对多个脚本的封装，其依次调用如下脚本对数据进行预处理： rdseed.pl：数据解压与重命名 eventinfo.pl：将事件信息写入SAC头段 marktime.pl：标记初动震相的理论到时 transfer.pl：去仪器响应 rotate.pl：旋转三分量至 RTZ 方向 resample.pl：数据重采样  1. rdseed.pl rdseed.pl 依次做以下三件事： 从事件目录下一个或多个 SEED 文件中提取出 SAC 文件和 RESP 文件 如果某台站的数据因故分割成多段数据，则进行合并 将 SAC 文件按照 NETWORK.STATION.LOCATION.CHANNEL.SAC 格式重命名  2. eventinfo.pl eventinfo.pl 从 event.info 文件中读取事件信息，并将其写入到 SAC 头段中。3. marktime.pl marktime.pl 会根据事件信息和台站位置，计算 Pnl 波理论到时并写入 SAC 文件头段变量 T0 中。4. transfer.pl transfer 依次做以下三件事： 去毛刺、去均值、去线性趋势和波形尖灭 去仪器响应，将原始波形数据转换为速度记录 将单位从默认的 nm/s 修改为 cm/s  5. rotate.pl rotate.pl 将所有台站的三分量转到大圆路径，即 RTZ 方向。6. resample.pl resample.pl 对数据进行重采样。resample.pl 需要重采样的采样周期作为参数，示例中使用的采样周期为 0.2 s。注意：所有 SAC 文件的采样周期必须相同，且要与格林函数的采样周期相同。这一点是程序设计的要求。",
  "url": "http://oh-my-cap.wangliang.one/procedures/preprocess/"
},{
  "name": "反演",
  "description": "权重文件 在事件目录下，需要一个与之对应的权重文件 weight.dat。权重文件中指定了每个台站的5段波形数据在反演中的权重。 ",
  "body": "权重文件 在事件目录下，需要一个与之对应的权重文件 weight.dat。权重文件中指定了每个台站的5段波形数据在反演中的权重。 权重文件格式 权重文件的格式为：station_name dist w1 w2 w3 w4 w5 tp ts   第1列是台站名，需要与 SAC 文件名（后缀除外）一致 第2列指定了该台站要使用哪个震中距的格林函数。gCAP 在反演时，会根据这里的震中距去找对应的格林函数文件 dist.grn.?，并将其与台站的实际观测数据进行对比。因而，理论上此处的 dist 应等于实际观测数据的震中距。但实际使用时为了避免每一个地震都要算一遍格林函数，因而 dist 只需要取格林函数库中与实际观测数据震中距最近的值即可。 w1 至 w5 代表了 PnlZ、PnlR、Z、R、T 五段波形的权重，默认值为 1。可以根据各段波形的数据质量将权重设置为 0 到 1 中的任意值。 若 tp 是正数，则其表示 Pnl 波的到时 ts 是 S 波实际到时减理论到时  额外的说明： 若 w2 值为 -1，就表示对应的台站是远震台，只使用 P (PnlZ) 和 SH (T) 波形段，此时若 ts 为正值则表示 S 波到时  生成权重文件 example/weight.pl 是一个用于生成权重文件的脚本。执行如下命令，则会生成权重文件 example/20080418093658/weight.dat：$ perl weight.pl 20080418093658  生成权重文件之前，可以手动观察一下数据质量。如果不想使用某数据，可以在相应的 Z 分量的头段 t9 上随意标一个到时。脚本在发现某数据的 t9 头段值不是 -12345 后，权重值会定为 0，从而在反演时不使用这个数据。权重文件的内容是： IU_WCI 140 1 1 1 1 1 20.2 0.0 NM_BLO 140 1 1 1 1 1 20.4 0.0 NM_SIUC 145 1 1 1 1 1 21.2 0.0 NM_SLM 210 1 1 1 1 1 29.0 0.0 NM_FVM 235 1 1 1 1 1 31.8 0.0 IU_WVT 260 1 1 1 1 1 35.0 0.0 NM_PVMO 280 1 1 1 1 1 37.7 0.0 IU_CCM 300 1 1 1 1 1 40.3 0.0 NM_MPH 415 1 1 1 1 1 54.2 0.0  几点说明： 此权重文件为自动生成，实际情况中需要根据波形质量以及反演结果对其中的参数进行微调 示例数据中，每 5 km 震中距计算一个格林函数，因而权重文件中第2列都是5的倍数 第8列中 tp 默认使用SAC头段 T1 的值（即用户手动标定的P波到时） 若 T1 未定义，则使用头段 T0 的值（即 TauP 标记的理论到时） 若未安装 TauP 而导致头段 T0 未定义，则默认值为 0   时窗截取 CAP 会把完整的波形记录切割成两个时间窗口：Pnl 和面波窗口。时间窗口的定义方式如下： 若 SAC 文件 Z 分量的 t1 和 t2 以及 T 分量的 t3 和 t4 有定义，则将四个时间依次作为 Pnl 起点、终点和面波的起点、终点 若条件 1 不满足，且在反演时用 -V 选项给了视速度，则会用下面的公式计算 t1、t2、t3 和 t4：t1 = dist/vp - 0.2*m1, t2 = ts t3 = dist/vLove - 0.3*m2, t4 = dist/vRayleigh + 0.7*m2  若条件 1 和 2 均不满足，则使用下面的公式计算：t1 = tp - 0.2*m1, t2 = ts t3 = ts - 0.3*m2, t4 = t3+m2   说明： 以上几个公式的正确性尚待确认 m1 和 m2 决定了 Pnl 和面波时间窗口的最大长度，由 -T 选项控制 上述公式内的 dist 是震源位置到台站的直线距离，程序在实际计算时是等于 sqrt( distance^2 + depSqr)，其中 distance 是震中距，而 depSqr 理应是震源深度的平方，但是程序实际是把 depSqr 固定为 25。尚不确定是否是BUG，但实际影响很小 tp 和 ts 是用的格林函数文件中的值，而不是权重文件中的值  反演 执行反演 在 example/ 目录下执行命令：$ cap.pl -H0.2 -P0.3 -S5/10/0 -T35/70 -D2/1/0.5 -C0.05/0.3/0.02/0.1 -W1 -X10 -Mmodel_15/5.0 20080418093658  即可得到反演结果。结果解释 执行以上命令后，会看到如下输出：20080418093658 15 1 Warning: flag=21 =&amp;gt; the minimum 295.1/90.0/ 1.7 is at boundary inversion done  第二行的警告是因为 NM_MPH 台的位置很特殊，刚好在节面上，可以打开 sac，看看这个台的波形可以看到其 P 波非常弱。可以将权重文件中 NM_MPH 台的五个权重全部改为 0，警告就会消失。如果没有看到第三行 inversion done 这样的提示，说明并没有进行反演，多半是因为忘记生成了权重文件。打开 example/20080418093658/model_15.ps，可以看到反演的结果。震源球右侧的三行文字分别表示： 第一行给出了事件ID（20080418093658），反演使用的模型 model 以及震源深度 15 km 机制解（FM）的参数是 295 90 2，即走向是 295 度，倾角是 90 度，滑移角是 2 度，说明这是一个走滑断层。震级为 5.20 Mw。残差为 1.881e-2。  下面的每一排波形代表一个台站的拟合情况，波形图中红色的理论波形，黑色的是实际的波形。台站名下方的两个数字是震中距和偏移时间，如 IU_WCI 下面的 137.5/-1.89 表示震中距是 137.5 公里，波形向前移动了 1.89 秒，每一列震相下面的数字是拟合度和该震相的波形偏移。有一点需要说明，也许你做出来的结果和我的有微小的差异。因为要写这个项目，这个事例，我做过多次，发现并不是每一次做出来的结果都一样，这一点，我尚不能解释，不过这种差异非常非常微小。反演多个深度的结果 执行 example/inversion.pl 脚本即可反演多个深度的结果：$ perl inversion.pl 20080418093658  执行 example/get_depth.pl 即可求出最佳深度和误差估计：$ perl get_depth.pl 20080418093658 ",
  "url": "http://oh-my-cap.wangliang.one/procedures/inversion/"
},{
  "name": "快速开始",
  "description": "Oh My CAP 中自带了一个示例事件，你可以按照如下步骤依次执行命令得到该事件的震源机制解，以验证所有程序都正确安装并对整个流程有初步的认识。# 进入 Glib 目录，生成格林函数 $ cd Glib $ perl run_fk.pl model.fk # 进入 example 目录 $ cd ../example/ # 对示例数据进行预处理 $ perl process.pl 20080418093658 # 警告 `WARNING potential for aliasing. new delta: 0.200000 data delta: 0.025000` 可忽略 # 生成权重文件 $ perl weight.pl 20080418093658 # 反演并查看反演结果 $ perl inversion.pl 20080418093658 # 路径 20080418093658 下面的 model_*.pdf为各个深度的结果和波形拟合图 # 绘制并查看深度反演结果 $ perl get_depth.pl 20080418093658 $ gs 20080418093658/depth.ps  下图展示了震源深度固定为 15 km 时的震源机制反演结果（即 20080418093658/model_15.",
  "body": "Oh My CAP 中自带了一个示例事件，你可以按照如下步骤依次执行命令得到该事件的震源机制解，以验证所有程序都正确安装并对整个流程有初步的认识。# 进入 Glib 目录，生成格林函数 $ cd Glib $ perl run_fk.pl model.fk # 进入 example 目录 $ cd ../example/ # 对示例数据进行预处理 $ perl process.pl 20080418093658 # 警告 `WARNING potential for aliasing. new delta: 0.200000 data delta: 0.025000` 可忽略 # 生成权重文件 $ perl weight.pl 20080418093658 # 反演并查看反演结果 $ perl inversion.pl 20080418093658 # 路径 20080418093658 下面的 model_*.pdf为各个深度的结果和波形拟合图 # 绘制并查看深度反演结果 $ perl get_depth.pl 20080418093658 $ gs 20080418093658/depth.ps  下图展示了震源深度固定为 15 km 时的震源机制反演结果（即 20080418093658/model_15.pdf）： 下图展示了不同震源深度的反演结果（即 20080418093658/depth.pdf）： ",
  "url": "http://oh-my-cap.wangliang.one/quick-start/"
},{
  "name": "Bug 列表",
  "description": "滚动更新版不包含已知的 bug：下载滚动更新版已知 bug 列表 此处列出 1.1 版及以后版本的 bug。1.1版 a03cb77 旋转分量后文件重命名的方式有误230aefc perl 5.2.6 以上版本无法找到 config 模块",
  "body": " 滚动更新版不包含已知的 bug：下载滚动更新版已知 bug 列表 此处列出 1.1 版及以后版本的 bug。1.1版 a03cb77 旋转分量后文件重命名的方式有误230aefc perl 5.2.6 以上版本无法找到 config 模块",
  "url": "http://oh-my-cap.wangliang.one/bug-list/"
},{
  "name": "代码差异",
  "description": "本项目对 fk、pssac 和 gCAP 的源码只进行了微量的修改。这里的详细修改历史是 GitHub 自动跟踪、自动呈现和自动更新的，所以不存在忘记记录的问题。fk fk 是 Prof. Lupei Zhu 写的一个计算水平分层介质中理论地震图的程序。官方版本： fk3.2.tar相对于官方版的改动： 删除了自带的示例 删除了无用的临时文件 修改 Makefile 使得其更通用 修改输出文件的命名规则以适应并行计算  详细修改历史见： https://github.com/wangliang1989/oh-my-cap/commits/master/src/fkpssac pssac 是 Prof. Lupei Zhu 根据 GMT 的 psxy 命令修改得到，用于绘制 SAC 格式的波形数据的程序。官方版本： pssac.tar pssac.c相对于官方版的改动： 修改 Makefile 使得其更通用  详细修改历史见： https://github.com/wangliang1989/oh-my-cap/commits/master/src/pssacgcap Prof. Zhu 的官方版本： gcap1.0.tar相对于官方版的改动： 删除了自带的示例及临时文件 修改 cap_plt.pl 和 depth.pl 使得其不依赖于 GMT 的系统设置 修改 cap.pl 使得用户不必再自行修改该文件 修改 Makefile 使得其更通用  详细修改历史见： https://github.",
  "body": " 本项目对 fk、pssac 和 gCAP 的源码只进行了微量的修改。这里的详细修改历史是 GitHub 自动跟踪、自动呈现和自动更新的，所以不存在忘记记录的问题。fk fk 是 Prof. Lupei Zhu 写的一个计算水平分层介质中理论地震图的程序。官方版本： fk3.2.tar相对于官方版的改动： 删除了自带的示例 删除了无用的临时文件 修改 Makefile 使得其更通用 修改输出文件的命名规则以适应并行计算  详细修改历史见： https://github.com/wangliang1989/oh-my-cap/commits/master/src/fkpssac pssac 是 Prof. Lupei Zhu 根据 GMT 的 psxy 命令修改得到，用于绘制 SAC 格式的波形数据的程序。官方版本： pssac.tar pssac.c相对于官方版的改动： 修改 Makefile 使得其更通用  详细修改历史见： https://github.com/wangliang1989/oh-my-cap/commits/master/src/pssacgcap Prof. Zhu 的官方版本： gcap1.0.tar相对于官方版的改动： 删除了自带的示例及临时文件 修改 cap_plt.pl 和 depth.pl 使得其不依赖于 GMT 的系统设置 修改 cap.pl 使得用户不必再自行修改该文件 修改 Makefile 使得其更通用  详细修改历史见： https://github.com/wangliang1989/oh-my-cap/commits/master/src/gcap",
  "url": "http://oh-my-cap.wangliang.one/code-diffs/"
},{
  "name": "如何修复 bug",
  "description": "Bug 是指编程时在代码里留下的错误。任何人写代码都会有 bug。本项目的 bug 有两个来源，一是朱老师的官方代码可能出现 bug，二是我在写脚本时，可能出现 bug。",
  "body": "Bug 是指编程时在代码里留下的错误。任何人写代码都会有 bug。本项目的 bug 有两个来源，一是朱老师的官方代码可能出现 bug，二是我在写脚本时，可能出现 bug。如果发现 bug，我会尽快修复，并在网站上的Bug 列表页面公布。但是，如果是朱老师的官方代码里的 bug，并且也不是明显错误，我不一定会去改代码。比如，在自动截取时窗的程序中，震源深度是写死为 5 公里的，本来是不对的，但是影响非常小。像这种，我就只会在网站上相关页面上提及，或者不提及。这样做是为了在正确性和保证本项目是朱露培的 CAP，而不是我的 CAP 这一原则之间的平衡。用户可以照我说明的 bug 情况，自己修改，也可以下载本项目的滚动更新版进行覆盖。滚动更新版不包含已知的 bug。下载滚动更新版",
  "url": "http://oh-my-cap.wangliang.one/post/fix-bug/"
},{
  "name": "1.1 版发布",
  "description": "1.1 版包含了这一年以来的改进。主要改进一是用配置文件设置参数，基本实现了不修改脚本做任意事件。二是并行计算格林函数，大幅提高运行速度。",
  "body": "1.1 版包含了这一年以来的改进。主要改进一是用配置文件设置参数，基本实现了不修改脚本做任意事件。二是并行计算格林函数，大幅提高运行速度。",
  "url": "http://oh-my-cap.wangliang.one/post/release-1.1/"
},{
  "name": "项目网站全面改版",
  "description": "我改版了项目网页，新用的模板有更清晰的代码高亮和博客功能。后者可以使网页更加灵活。今后在新的博客版块会发布项目相关的新闻和专门问题的讲解。",
  "body": "我改版了项目网页，新用的模板有更清晰的代码高亮和博客功能。后者可以使网页更加灵活。今后在新的博客版块会发布项目相关的新闻和专门问题的讲解。",
  "url": "http://oh-my-cap.wangliang.one/post/new-website/"
}
]
