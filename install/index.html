<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>安装</title>

    
    <link rel="dns-prefetch" href="https://maxcdn.bootstrapcdn.com/" />
    <link rel="preconnect" href="https://maxcdn.bootstrapcdn.com/" />
    <link rel="dns-prefetch" href="https://unpkg.com/" />
    <link rel="preconnect" href="https://unpkg.com/" />
    
    <link rel="prefetch" href="https://unpkg.com/lunr/lunr.js" />
    <link rel="prefetch" href="http://oh-my-cap.wangliang.one/js/search.min.js" />
    <link rel="prefetch" href="http://oh-my-cap.wangliang.one/index.json" />
    <meta name="description" itemprop="description" content="对于初学者。本安装文档的每一个字都需要阅读！因为版权原因，我无法提供全部安装包，有困难请加群 580712662。 以下安装步骤在 CentOS 上验证通过。在其他 Linux 发行版及 Mac 上安装步骤类似。 因为 gCAP 依赖的 SAC 几乎不可能在 Windows 上安装，所以本安装指南不适用于 Windows。 gCAP 依赖 SAC、GMT、fk 和 pssac。 安装编译工具 CentOS 用户 sudo yum install gcc gcc-c&#43;&#43; gcc-gfortran sudo yum install compat-gcc-44 compat-gcc-44-c&#43;&#43; compat-gcc-44-gfortran compat-libf2c-34 sudo yum install make  其他 Linux 发行版安装方法类似。请勿尝试安装 g77，gfortran 已经全面代替 g77 了。 MacOS 用户 MacOS 用户推荐使用 Homebrew 安装。 brew install gcc make  SAC Oh My CAP 依赖 SAC v101.6a。 SAC 是免费而非开源软件。根据授权协议，我不能直接向你提供，你需要自己向 IRIS 申请源码包或者二进制包。申请地址是 http://ds." id="desc"><meta name="generator" content="Hugo 0.25.1" /><link rel="canonical" href="http://oh-my-cap.wangliang.one/install/">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="prefetch stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    
    <link rel="prefetch stylesheet" type="text/css" href="http://oh-my-cap.wangliang.one/styles.css">

    <script>var _paq = undefined;</script></head>
  <body itemscope itemtype="http://schema.org/WebPage">
    <div id="site-container">
      <div id="site-header">
        <header class="small-text-center medium-text-left">
          <a href="http://oh-my-cap.wangliang.one">
            <span id="site-title" itemprop="name">Oh My CAP</span>
            <br/><span id="site-tagline">世间最庄严的问题是：我能做什么好事？</span>
          </a>
        </header>
        <label for="menu-toggle-box"><div id="menu-toggle" class="main-nav no-select"><span><span class="fa fa-bars"></span> MENU</span></div></label>
        <input type="checkbox" id="menu-toggle-box" class="hide"/>
        <nav id="main-nav">
          <ul class="menu"><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E5%8D%9A%E5%AE%A2" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/post/" >
      <span>博客</span><label for="nav-%E5%8D%9A%E5%AE%A2">
        &nbsp;&nbsp;<span class="nav-arrow">&#9656;</span>
      </label></a><ul>
    <li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-1.1-%E7%89%88%E5%8F%91%E5%B8%83" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/post/release-1.1/" >
      <span>1.1 版发布</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E5%A6%82%E4%BD%95%E4%BF%AE%E5%A4%8D-bug" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/post/fix-bug/" >
      <span>如何修复 BUG</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E9%A1%B9%E7%9B%AE%E7%BD%91%E7%AB%99%E5%85%A8%E9%9D%A2%E6%94%B9%E7%89%88" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/post/new-website/" >
      <span>项目网站全面改版</span></a></li>
    </ul></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/about/" >
      <span>新手入门</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E5%AE%89%E8%A3%85" class="hide"/>
    <a class="main-nav button active" tabindex="0" href="http://oh-my-cap.wangliang.one/install/" >
      <span>安装</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/quick-start/" >
      <span>快速开始</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E6%B5%81%E7%A8%8B" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/procedures/" >
      <span>流程</span><label for="nav-%E6%B5%81%E7%A8%8B">
        &nbsp;&nbsp;<span class="nav-arrow">&#9656;</span>
      </label></a><ul>
    <li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E6%B5%81%E7%A8%8B%E4%BB%8B%E7%BB%8D" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/procedures/intro-to-procedures/" >
      <span>流程介绍</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E8%AE%A1%E7%AE%97%E6%A0%BC%E6%9E%97%E5%87%BD%E6%95%B0" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/procedures/gflib/" >
      <span>计算格林函数</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/procedures/preprocess/" >
      <span>数据预处理</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E5%8F%8D%E6%BC%94" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/procedures/inversion/" >
      <span>反演</span></a></li>
    </ul></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-bug-%E5%88%97%E8%A1%A8" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/bug-list/" >
      <span>BUG 列表</span></a></li><li class="no-select" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <input type="checkbox" id="nav-%E4%BB%A3%E7%A0%81%E5%B7%AE%E5%BC%82" class="hide"/>
    <a class="main-nav button" tabindex="0" href="http://oh-my-cap.wangliang.one/code-diffs/" >
      <span>代码差异</span></a></li></ul>
        </nav>
      </div>
      <div id="main-container" class="row" role="main" itemprop="mainContentOfPage">
        
        
        
<main class="row-item small-full medium-two-thirds" >
  <article id="post-article" itemscope itemtype="http://schema.org/Article" itemref="desc">
    <header id="page-header">
      <h1 itemprop="headline">安装</h1>
    </header>
    
    <div id="post-content"><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#安装编译工具">安装编译工具</a>
<ul>
<li><a href="#centos-用户">CentOS 用户</a></li>
<li><a href="#macos-用户">MacOS 用户</a></li>
</ul></li>
<li><a href="#sac">SAC</a></li>
<li><a href="#gmt">GMT</a></li>
<li><a href="#taup">TauP</a></li>
<li><a href="#下载-oh-my-cap">下载 Oh My CAP</a></li>
<li><a href="#fk">fk</a></li>
<li><a href="#pssac">pssac</a></li>
<li><a href="#gcap">gCAP</a></li>
<li><a href="#添加环境变量">添加环境变量</a></li>
<li><a href="#安装-perl-的并行模块">安装 Perl 的并行模块</a></li>
</ul></li>
</ul>
</nav>
      <span itemprop="articleBody">

<p>对于初学者。本安装文档的每一个字都需要阅读！因为版权原因，我无法提供全部安装包，有困难请加群 580712662。</p>

<p>以下安装步骤在 CentOS 上验证通过。在其他 Linux 发行版及 Mac 上安装步骤类似。
因为 gCAP 依赖的 SAC 几乎不可能在 Windows 上安装，所以本安装指南不适用于 Windows。</p>

<p>gCAP 依赖 SAC、GMT、fk 和 pssac。</p>

<h2 id="安装编译工具">安装编译工具</h2>

<h3 id="centos-用户">CentOS 用户</h3>

<pre><code>sudo yum install gcc gcc-c++ gcc-gfortran
sudo yum install compat-gcc-44 compat-gcc-44-c++ compat-gcc-44-gfortran compat-libf2c-34
sudo yum install make
</code></pre>

<p>其他 Linux 发行版安装方法类似。请勿尝试安装 g77，gfortran 已经全面代替 g77 了。</p>

<h3 id="macos-用户">MacOS 用户</h3>

<p>MacOS 用户推荐使用 <a href="http://brew.sh/index_zh-cn.html">Homebrew</a> 安装。</p>

<pre><code>brew install gcc make
</code></pre>

<h2 id="sac">SAC</h2>

<p>Oh My CAP 依赖 SAC <strong>v101.6a</strong>。</p>

<p>SAC 是免费而非开源软件。根据授权协议，我不能直接向你提供，你需要自己向 IRIS 申请源码包或者二进制包。申请地址是 <a href="http://ds.iris.edu/ds/nodes/dmc/forms/sac/">http://ds.iris.edu/ds/nodes/dmc/forms/sac/</a> 。你要注意，这个审核是人工审核，别和 IRIS 耍花招。</p>

<p>SAC 的安装参考：</p>

<ul>
<li><p><a href="https://seisman.github.io/SAC_Docs_zh/introduction/linux-install.html">SAC 在 Linux 上的安装</a></p></li>

<li><p><a href="https://seisman.github.io/SAC_Docs_zh/introduction/mac-install.html">SAC 在 Mac 上的安装</a></p></li>
</ul>

<h2 id="gmt">GMT</h2>

<p>gCAP 依赖 GMT4。</p>

<p>GMT4 的安装请参考：</p>

<ul>
<li><a href="http://seisman.info/install-gmt4-under-linux.html">GMT 4 在 Linux 上的安装</a></li>
<li><a href="http://seisman.info/install-gmt4-under-mac.html">GMT 4 在 Mac 上的安装</a></li>
</ul>

<p>GMT5 用户可以参考 <a href="http://seisman.info/multiple-versions-of-gmt.html">GMT4 与 GMT5 双版本共存</a> 一文，以保证系统中存在 GMT4 和 GMT5 两个版本且互不影响。</p>

<h2 id="taup">TauP</h2>

<p>本项目中使用 TauP 计算理论到时。TauP 的安装请参考 <a href="http://seisman.info/install-taup.html">TauP 的安装</a>。</p>

<h2 id="下载-oh-my-cap">下载 Oh My CAP</h2>

<ol>
<li><a href="https://github.com/wangliang1989/oh-my-cap/archive/v1.1.zip">zip 格式压缩包</a></li>
<li><a href="https://github.com/wangliang1989/oh-my-cap/archive/v1.1.tar.gz">tar.gz 格式压缩包</a></li>
</ol>

<h2 id="fk">fk</h2>

<p>gcap 需要使用 fk 计算格林函数。</p>

<p>本项目中包含了 fk 源码，进入 <code>/path/to/oh-my-cap/src/fk</code> 目录，输入命令进行编译:</p>

<pre><code>$ make
</code></pre>

<p><strong>若系统中已自行安装 fk，可忽略这一步。</strong></p>

<h2 id="pssac">pssac</h2>

<p>gcap 需要使用 pssac 绘制地震波形。</p>

<p>本项目中包含了 pssac 源码，进入 <code>/path/to/oh-my-cap/src/pssac</code> 目录，输入命令进行编译:</p>

<pre><code>$ make
</code></pre>

<p><strong>若系统中已自行安装 pssac，可忽略这一步。</strong></p>

<h2 id="gcap">gCAP</h2>

<p>在成功执行完以上步骤后，才可以着手编译 gCAP。</p>

<p>gCAP 使用了商业软件 Numerical Recipes（简称 NR）中的一些子函数，
包括 <code>matrix</code> 、 <code>free_matrix</code> 、 <code>free_convert_matrix</code> 、 <code>jacobi</code> 和 <code>eigsrt</code> 。
由于版权原因，我不能把这几个子函数的源码直接放到这里。
用户应自行购买缺失的源码，并将其放到 <code>/path/to/oh-my-cap/src/gcap</code> 下，
再在该目录下进行编译:</p>

<pre><code>$ make
</code></pre>

<h2 id="添加环境变量">添加环境变量</h2>

<p>需要为 fk、pssac 和 gcap 添加环境变量。将以下内容加入配置文件 <code>~/.bashrc</code> 中:</p>

<pre><code># 注意将 /path/to/oh-my-cap 修改为 oh-my-cap 实际的绝对路径!
# 若自行安装了 fk 或 pssac，请注释掉相关环境变量配置行
export OH_MY_CAP=/path/to/oh-my-cap
export PATH=$OH_MY_CAP/src/fk:${PATH}
export PATH=$OH_MY_CAP/src/pssac:${PATH}
export PATH=$OH_MY_CAP/src/gcap:${PATH}
</code></pre>

<p><strong>通常系统的默认 shell 都是 Bash，如果有你自行更换默认 Shell 的情况（如Csh），那么设置的方式可能不同，请自行解决！</strong></p>

<h2 id="安装-perl-的并行模块">安装 Perl 的并行模块</h2>

<p>计算格林函数比较耗时，Oh My CAP 已经实现用并行计算格林函数：</p>

<pre><code>cpanm Parallel::ForkManager
</code></pre>

<p>cpanm 是需要事先安装的，安装方法见<a href="http://seisman.info/perl-plenv.html">Perl 多版本共存之 plenv</a></p>
</span>
    </div></article>

  </main>

        <aside class="row-item small-full medium-third right" itemscope itemtype="http://schema.org/WPSideBar">
  
  <div class="widget" id="search-container">
  <header>
		<span class="widget-header"><span class="fa fa-search"></span> Search</span>
	</header>
	<input type="search" name="search" id="searchbox" placeholder="Search..." autocomplete="off"/>
  <div id="search-results" class="hide"></div>
</div>
	<div class="widget">
	<header>
		<span class="widget-header"><span class="fa fa-pencil"></span> <a href="http://oh-my-cap.wangliang.one/post/">Recent Posts</a></span>
	</header>
	
	<a class="widget-header-small button" href="http://oh-my-cap.wangliang.one/index.xml"><span class="fa fa-rss"></span> Subscribe to the Site</a>
	<ul><li><a href="http://oh-my-cap.wangliang.one/post/release-1.1/">1.1 版发布</a></li><li><a href="http://oh-my-cap.wangliang.one/post/fix-bug/">如何修复 bug</a></li><li><a href="http://oh-my-cap.wangliang.one/post/new-website/">项目网站全面改版</a></li></ul>
</div>
  
	
	
</aside>

      </div>
      <footer class="row">
        <div class="small-full medium-half row-item small-text-center medium-text-left medium-left">
          <small>
            &copy; 2017
            <span itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
              <span itemprop="name">Oh My CAP</span>
            </span>
          </small>
        </div>
        
        <div class="small-full medium-half row-item small-text-center medium-text-right" id="social-icons">
          
          
          <a href="https://github.com/wangliang1989/oh-my-cap" rel="me nofollow">
            <span class="fa fa-github"></span>
          </a>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </div>
      </footer>
    </div><script src="https://unpkg.com/lunr/lunr.js"></script>
    <script src="http://oh-my-cap.wangliang.one/js/search.js" type="text/javascript"></script>
    
    <script>
      var lunrIndex = undefined;
      loadIndex("http:\/\/oh-my-cap.wangliang.one\/index.json").then(
        function(index) { lunrIndex = index; },
        function(status){}
      );
    </script></body>
</html>
